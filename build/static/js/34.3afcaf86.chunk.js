(this["webpackJsonp@KyberSwap/interface"]=this["webpackJsonp@KyberSwap/interface"]||[]).push([[34],{"./src/components/LiveChart/index.tsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/@lingui/react/esm/index.js"),c=n("./node_modules/react/index.js"),o=n.n(c),s=n("./node_modules/react-device-detect/main.js"),d=n("./node_modules/react-feather/dist/icons/repeat.js"),l=n("./node_modules/rebass/dist/index.esm.js"),u=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=n("./src/components/DoubleLogo/index.tsx"),f=n("./src/hooks/useTheme.ts"),p=n("./node_modules/react/jsx-runtime.js"),h=u.default.span.withConfig({displayName:"ProChartToggle__ToggleButton",componentId:"sc-8pz8g7-0"})(["position:absolute;transition:all 0.2s ease;background-color:",";"," border-radius:",";height:100%;top:0;"],(function(e){return e.theme.tabActive}),(function(e){var t,n=e.element;return"\n    transform: translateX(".concat(null!==(t=null===n||void 0===n?void 0:n.offsetLeft)&&void 0!==t?t:55,"px);\n    width: ").concat((null===n||void 0===n?void 0:n.offsetWidth)||44,"px;\n  ")}),(function(e){return"md"===e.size?"16px":"12px"})),m=u.default.span.withConfig({displayName:"ProChartToggle__ToggleElement",componentId:"sc-8pz8g7-1"})(["font-size:",";font-weight:500;height:",";padding:6px 12px;display:flex;align-items:center;justify-content:center;z-index:1;transition:all 0.2s ease;color:",";cursor:",";"],(function(e){return"md"===e.size?"16px":"12px"}),(function(e){return("md"===e.size?32:20)+(e.border?0:2)+"px"}),(function(e){var t=e.theme,n=e.isActive,r=e.disabled;return n?t.text:r?t.buttonGray:t.subText}),(function(e){return e.disabled?"inherit":"pointer"})),x=u.default.button.withConfig({displayName:"ProChartToggle__ToggleWrapper",componentId:"sc-8pz8g7-2"})(["position:relative;border-radius:",";border:",";background:",";display:flex;width:fit-content;outline:none;padding:0;"],(function(e){return"md"===e.size?"18px":"12px"}),(function(e){var t=e.background;return e.border?"2px solid ".concat(t):"none"}),(function(e){return e.background}));function v(e){var t=e.id,n=e.activeName,r=void 0===n?"pro":n,i=e.buttons,o=void 0===i?[{name:"basic",title:"Basic"},{name:"pro",title:"Pro"}]:i,s=e.toggle,d=e.size,l=void 0===d?"sm":d,u=e.border,b=void 0!==u&&u,v=Object(c.useRef)({}),j=Object(f.a)(),g=Object(c.useState)(),O=Object(a.a)(g,2),w=O[0],y=O[1];return Object(c.useEffect)((function(){y(v.current[r])}),[r]),Object(p.jsxs)(x,{id:t,size:l,border:b,background:"".concat(j.tabBackgound).concat(o.some((function(e){return e.disabled}))?"20":""),children:[o.map((function(e){return Object(p.jsx)(m,{ref:function(t){v.current[e.name]=t},isActive:r===e.name,size:l,border:b,disabled:e.disabled,onClick:function(){!e.disabled&&s(e.name)},children:e.title},e.name)})),Object(p.jsx)(h,{element:w,size:l})]})}var j,g=n("./src/components/LocalLoader/index.tsx"),O=n("./node_modules/react-dom/server.browser.js"),w=["title","titleId"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function C(e,t){var n=e.title,r=e.titleId,a=k(e,w);return c.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:28,height:28,ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,j||(j=c.createElement("g",{fill:"currentColor"},c.createElement("path",{d:"M11 17v4h1V16h-5v1z"}),c.createElement("path",{d:"M16.854 11.854l5-5-.708-.708-5 5zM17 17v4H16V16h5v1z"}),c.createElement("path",{d:"M11.146 11.854l-5-5 .708-.708 5 5zM11 11v-4h1v5h-5v-1z"}),c.createElement("path",{d:"M16.854 16.146l5 5-.708.708-5-5z"}),c.createElement("g",null,c.createElement("path",{d:"M17 11v-4H16v5h5v-1z"}),c.createElement("path",{d:"M11.146 16.146l-5 5 .708.708 5-5z"})))))}var _,S=c.forwardRef(C),M=(n.p,["title","titleId"]);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function z(e,t){var n=e.title,r=e.titleId,a=I(e,M);return c.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:28,height:28,ref:t,"aria-labelledby":r},a),n?c.createElement("title",{id:r},n):null,_||(_=c.createElement("g",{fill:"currentColor"},c.createElement("path",{d:"M21 7v4h1V6h-5v1z"}),c.createElement("path",{d:"M16.854 11.854l5-5-.708-.708-5 5zM7 7v4H6V6h5v1z"}),c.createElement("path",{d:"M11.146 11.854l-5-5 .708-.708 5 5zM21 21v-4h1v5h-5v-1z"}),c.createElement("path",{d:"M16.854 16.146l5 5-.708.708-5-5z"}),c.createElement("g",null,c.createElement("path",{d:"M7 21v-4H6v5h5v-1z"}),c.createElement("path",{d:"M11.146 16.146l-5 5 .708.708 5-5z"})))))}var P=c.forwardRef(z),N=(n.p,n.p+"static/media/loading_logo.80473ef7.svg"),E=Object(u.keyframes)(["0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}"]),A=u.default.div.withConfig({displayName:"AnimatedLoader__Wrapper",componentId:"sc-1gd9rp0-0"})(["width:","px;height:","px;display:inline-block;overflow:hidden;background:transparent;"],(function(e){return e.size}),(function(e){return e.size})),L=u.default.div.withConfig({displayName:"AnimatedLoader__Inner",componentId:"sc-1gd9rp0-1"})(["width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center;transform:translateZ(0) scale(1);backface-visibility:hidden;transform-origin:0 0;> div{position:absolute;animation:"," 1s linear infinite;width:","px;height:","px;top:","px;left:","px;border-radius:50%;box-shadow:0 "," 0 0 ",";transform-origin:",";box-sizing:content-box;}"],E,(function(e){return.8*e.size}),(function(e){return.8*e.size}),(function(e){return.1*e.size}),(function(e){return.1*e.size}),(function(e){return e.size>=200?"3px":"2px"}),(function(e){return e.theme.primary}),(function(e){var t=e.size;return"".concat(.4*t,"px ").concat(.41*t,"px")}));var D=function(e){var t=e.size,n=void 0===t?160:t;return Object(p.jsx)(A,{size:n,children:Object(p.jsxs)(L,{size:n,children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("img",{src:N,width:"30%",alt:""})]})})},F=n("./src/constants/styles.ts"),R=n("./src/state/user/hooks.tsx"),H=n("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),B=n("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),V=n("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),W=n("./node_modules/@kyberswap/ks-sdk-core/dist/index.js"),U=n("./src/constants/index.ts"),q=n("./src/constants/networks.ts"),J=n("./src/constants/tokens.ts"),K=n("./src/hooks/index.ts"),G={supported_resolutions:["1","3","5","15","30","1H","2H","4H","1D","1W","1M"]},Y=function(e){switch(e){case W.ChainId.MAINNET:return"chain-ethereum";case W.ChainId.BSCMAINNET:return"chain-bsc";case W.ChainId.MATIC:return"chain-polygon";case W.ChainId.CRONOS:return"chain-cronos";case W.ChainId.AVAXMAINNET:return"chain-avalanche";case W.ChainId.FANTOM:return"chain-fantom";case W.ChainId.ARBITRUM:return"chain-arbitrum";case W.ChainId.VELAS:return"chain-velas";case W.ChainId.AURORA:return"chain-aurora";case W.ChainId.OASIS:return"chain-oasis";case W.ChainId.OPTIMISM:return"chain-optimism";case W.ChainId.ETHW:return"chain-ethw";default:return""}},Z=2592e6,$=6048e5,X=864e5,Q={"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9":"0xd75ea151a61d06868e31f8988d28dfe5e9df57b4","0x6b175474e89094c44da98b954eedeac495271d0f":"0x74c99f3f5331676f6aec2756e1f39b4fc029a83e","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48":"0x74c99f3f5331676f6aec2756e1f39b4fc029a83e","0x1c954e8fe737f99f68fa1ccda3e51ebdb291948c":"nodata","0x8f3cf7ad23cd3cadbd9735aff958023239c6a063":"0xa374094527e1673a86de625aa59517c5de346d32","0x1af3f329e8be154074d8769d1ffa4ee058b1dbc3":"0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b","0xd586e7f844cea2f87f50152665bcbc2c279d8d70":"0xa389f9430876455c36478deea9769b7ca4e3ddb1","0xc7198437980c041c805a1edcba50c1ce5db95118":"0xa389f9430876455c36478deea9769b7ca4e3ddb1","0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98":"0xa389f9430876455c36478deea9769b7ca4e3ddb1","0x8d11ec38a3eb5e956b052f67da8bdc9bef8abf3e":"0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd","0x049d68029688eabf473097a2fc38ef61633a3c7a":"0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd","0x41e3df7f716ab5af28c1497b354d79342923196a":"0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd","0xf2001b145b43032aaf5ee2884e456ccd805f677d":"0xa68466208f1a3eb21650320d2520ee8eba5ba623","0x66e428c3f67a68878562e79a0234c1f83c208770":"0xa68466208f1a3eb21650320d2520ee8eba5ba623","0xda10009cbd5d07dd0cecc66161fc93d7c9000da1":"0xc31e54c7a869b9fcbecc14363cf510d1c41fa443","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9":"0xc31e54c7a869b9fcbecc14363cf510d1c41fa443","0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab":"0x0f0fc5a5029e3d155708356b422d22cc29f8b3d4","0xd501281565bf7789224523144fe5d98e8b28f267":"0x64ed9711667c9e8923bee32260a55a9b8dbc99d3","0x63a72806098Bd3D9520cC43356dD78afe5D386D9":"0x5944f135e4f1e3fa2e5550d4b5170783868cc4fe","0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d":"0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b","0xdac17f958d2ee523a2206206994597c13d831ec7":"0x4e68ccd3e89f51c3074ca5072bbac773960dfa36","0x7ceb23fd6bc0add59e62ac25578270cff1b9f619":"0xce1923d2242bba540f1d56c8e23b1fbeae2596dc","0xff970a61a04b1ca14834a43f5de4533ebddb5cc8":"0x905dfcd5649217c42684f23958568e533c711aa3","0x7f5c764cbc14f9669b88837ca1490cca17c31607":"0x1a981daa7967c66c3356ad044979bc82e4a478b9","0xe9e7cea3dedca5984780bafc599bd69add087d56":"0x58f876857a02d6762e0101bb5c46a8c1ed44dc16","0x853ea32391aaa14c112c645fd20ba389ab25c5e0":"0x5d79a43e6b9d8e3ecca26f91afe34634248773c8","0x261c94f2d3cccae76f86f6c8f2c93785dd6ce022":"nodata","0x94b008aA00579c1307B0EF2c499aD98a8ce58e58":"0xc858a329bf053be78d6239c4a4343b8fbd21472b"},ee="proChartCheckedPairs",te=function(e){return fetch("".concat("https://pancake-subgraph-proxy.kyberswap.com/dextools","/").concat(e)).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},ne=function(e,t){return Q[e.toLowerCase()]?new Promise((function(t,n){t([{id:Q[e.toLowerCase()]}])})):te("".concat(Y(t),"/api/pair/search?s=").concat(e))},re=function(e,t){return te("".concat(Y(t),"/api/Uniswap/1/history-candle-status?pair=").concat(e))},ae=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"month",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"15m",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"eth";return te("".concat(Y(e),"/api/Pancakeswap/history/candles?sym=").concat(c,"&span=").concat(a,"&pair=").concat(t,"&ts=").concat(r,"&v=").concat(n).concat(i&&"&res="+i))},ie=function(e,t){return!(!t||!e)&&(t.isNative||W.WETH[e].address.toLowerCase()===t.address.toLowerCase())},ce=function(e,t){if(ie(e,t)||!e||null!==t&&void 0!==t&&t.isNative)return!1;var n=[U.tb[e].address.toLowerCase(),U.sb[e].address.toLowerCase(),U.y[e].address.toLowerCase(),"0xe9e7cea3dedca5984780bafc599bd69add087d56","0xcd7509b76281223f5b7d3ad5d47f8d7aa5c2b9bf","0xdb28719f7f938507dbfe4f0eae55668903d34a15","0xe887512ab8bc60bcc9224e1c3b5be68e26048b8b","0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98","0x4fbf0429599460d327bd5f55625e30e4fc066095"].concat(Object(r.a)(J.a[e].map((function(e){return e.toLowerCase()}))));return!(null===t||void 0===t||!t.address||!n.includes(t.address.toLowerCase()))},oe=function(e,t){var n=localStorage.getItem(ee),r=n?JSON.parse(n):{};r[e]=Object(V.a)(Object(V.a)({},t),{},{time:(new Date).getTime()}),localStorage.setItem(ee,JSON.stringify(r))},se=function(){var e=Object(B.a)(Object(H.a)().mark((function e(t,n){var r,i,c,o,s,d,l,u,b,f,p,h,m,x,v,j,g,O,w,y,k,C,_,S,M;return Object(H.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.values(t),i=Object(a.a)(r,2),c=i[0],o=i[1],s={ver:0,pairAddress:""},c&&o){e.next=4;break}return e.abrupt("return",Promise.resolve(s));case 4:if(!(ie(n,c)&&ie(n,o)||ce(n,c)&&ce(n,o))){e.next=6;break}return e.abrupt("return",Promise.resolve(s));case 6:if(d=localStorage.getItem(ee),l=d?JSON.parse(d):{},u=c.isNative?q.b[n||W.ChainId.MAINNET].nativeToken.name:c.symbol,b=o.isNative?q.b[n||W.ChainId.MAINNET].nativeToken.name:o.symbol,f=[u,b,n].sort().join(""),!((p=l[f])&&p.ver&&p.pairAddress&&p.time>(new Date).getTime()-X)){e.next=14;break}return e.abrupt("return",Promise.resolve({ver:p.ver,pairAddress:p.pairAddress}));case 14:if(!ie(n,c)&&!ie(n,o)){e.next=39;break}if(null===(h=ie(n,c)?o:c)||void 0===h||!h.address){e.next=37;break}return e.next=19,ne(h.address,n);case 19:if(!((m=e.sent).length>0&&m[0].id)){e.next=37;break}return e.next=23,re(m[0].id,n);case 23:if(e.t0=e.sent,e.t0){e.next=26;break}e.t0=0;case 26:return v=e.t0,j=Math.floor((new Date).getTime()/Z)*Z,e.next=30,ae(n,m[0].id,v,j,"month");case 30:if(g=e.sent,null===(O=g.data)||void 0===O||null===(x=O.candles)||void 0===x||!x.length){e.next=37;break}return s.ver=v,s.pairAddress=m[0].id,oe(f,s),e.abrupt("return",Promise.resolve(s));case 37:e.next=60;break;case 39:if(!ce(n,c)&&!ce(n,o)){e.next=60;break}if(null===(w=ce(n,c)?o:c)||void 0===w||!w.address){e.next=60;break}return e.next=44,ne(w.address,n);case 44:if(!((y=e.sent).length>0&&y[0].id)){e.next=60;break}return e.next=48,re(y[0].id,n);case 48:if(!(k=e.sent)){e.next=60;break}return _=Math.floor((new Date).getTime()/Z)*Z,e.next=53,ae(n,y[0].id,k,_,"month","15m","usd");case 53:if(S=e.sent,null===(M=S.data)||void 0===M||null===(C=M.candles)||void 0===C||!C.length){e.next=60;break}return s.ver=k,s.pairAddress=y[0].id,oe(f,s),e.abrupt("return",Promise.resolve(s));case 60:return oe(f,s),e.abrupt("return",Promise.resolve(s));case 62:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=u.default.div.withConfig({displayName:"TradingViewChart__ProLiveChartWrapper",componentId:"sc-1hk57ea-0"})(["margin-top:10px;height:",";"," overflow:hidden;box-shadow:0px 4px 16px rgb(0 0 0 / 4%);border-radius:",";",""],s.isMobile?"100%":"calc(100% - 0px)",(function(e){var t=e.theme;return"border: 1px solid ".concat(t.background,";")}),s.isMobile?"0":"10px",(function(e){return e.fullscreen&&!s.isMobile&&"\n    background-color: rgb(0,0,0,0.5);\n    position: fixed;\n    top: -15px;\n    left: 0;\n    z-index: ".concat(F.a.LIVE_CHART,";\n    padding-top: 82px;\n    height: 100%!important;\n    width: 100%!important;\n    border-radius: 0;\n    margin:0;\n  ")})),le=u.default.div.withConfig({displayName:"TradingViewChart__Loader",componentId:"sc-1hk57ea-1"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),ue=u.default.div.withConfig({displayName:"TradingViewChart__MobileChart",componentId:"sc-1hk57ea-2"})(["height:100%;width:100%;bottom:0;"," ",""],(function(e){var t=e.theme;return!e.fullscreen&&"border-bottom: solid 15px ".concat(t.buttonBlack,";")}),(function(e){var t=e.$loading;return"display:".concat(t?"none":"block",";")})),be="proChartSavedState";function fe(e){var t=e.currencies,n=e.stateProChart,i=e.className,o=Object(f.a)(),d=Object(R.v)(),l=n.hasProChart,u=n.apiVersion,b=n.pairAddress,h=n.loading,m=Object(c.useState)(null),x=Object(a.a)(m,2),v=x[0],j=x[1],g=Object(c.useState)(!0),w=Object(a.a)(g,2),y=w[0],k=w[1],C=Object(c.useState)(!1),_=Object(a.a)(C,2),M=_[0],T=_[1],I=function(e,t,n){var i,o,s=Object(K.b)().chainId,d=ie(s,e[0]),l=ie(s,e[1]),u=ce(s,e[0])&&(null===(i=e[1])||void 0===i?void 0:i.isToken)||ce(s,e[1])&&(null===(o=e[0])||void 0===o?void 0:o.isToken),b=ce(s,e[0])&&l||ce(s,e[1])&&d,f=u||b?"usd":"eth",p=Object(c.useState)([]),h=Object(a.a)(p,2),m=h[0],x=h[1],v=Object(c.useState)(0),j=Object(a.a)(v,2),g=j[0],O=j[1],w=Object(c.useRef)({data:m,oldestTs:g}),y=Object(c.useRef)(!1),k=Object(c.useRef)(),C=!b&&(d||ce(s,e[0]))||b&&l;Object(c.useEffect)((function(){w.current={data:m,oldestTs:g}}),[m,g]),Object(c.useEffect)((function(){return function(){k.current&&clearInterval(k.current)}}),[]),Object(c.useEffect)((function(){x([])}),[e]);var _=Object(c.useCallback)(function(){var e=Object(B.a)(Object(H.a)().mark((function e(r){var a,i,c,o=arguments;return Object(H.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"month",i=o.length>2&&void 0!==o[2]?o[2]:"15m",e.next=4,ae(s,t,n,r,a,i,f);case 4:return c=e.sent,e.abrupt("return",null===c||void 0===c?void 0:c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,t,n,f]);return Object(c.useMemo)((function(){return{onReady:function(e){setTimeout((function(){return e(G)}))},resolveSymbol:function(){var t=Object(B.a)(Object(H.a)().mark((function t(n,r,a){var i,c,o,d,l,u,b,f,p,h,m;return Object(H.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l=null!==(i=e[0])&&void 0!==i&&i.isNative?q.b[s||W.ChainId.MAINNET].nativeToken.name:null===(c=e[0])||void 0===c?void 0:c.symbol,u=null!==(o=e[1])&&void 0!==o&&o.isNative?q.b[s||W.ChainId.MAINNET].nativeToken.name:null===(d=e[1])||void 0===d?void 0:d.symbol,b="".concat(l,"/").concat(u),f=Math.floor((new Date).getTime()/Z)*Z,t.next=7,_(f,"month");case 7:p=t.sent,h=p.candles,m={ticker:b,name:b,full_name:b,listed_exchange:"",format:"price",description:b,type:"crypto",session:"24x7",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,exchange:"",minmov:1,pricescale:h.length>0?Math.pow(10,Math.ceil(Math.log10(C?h[0].open:1/h[0].open))+5):1e4,has_intraday:!0,has_empty_bars:!0,has_weekly_and_monthly:!0,has_daily:!0,supported_resolutions:G.supported_resolutions,data_status:"streaming"},r(m),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n,r){return t.apply(this,arguments)}}(),getBars:function(){var e=Object(B.a)(Object(H.a)().mark((function e(t,n,a,i,c){var o,s,d,l,u,b,f,p,h,m,v,j,g,k,S,M,T;return Object(H.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.current){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,s=1e3*a.from,d=1e3*a.to,l=w.current.data,u=!1,!((b=(null===(o=l[0])||void 0===o?void 0:o.time)||(new Date).getTime())>s)){e.next=31;break}p=Math.floor(b/Z)+(a.firstDataRequest?1:0),h=Math.floor(s/Z),y.current=!0,m=[],v=p-1;case 14:if(!(v>=h)){e.next=23;break}if(j=v*Z,m.push(_(j)),!(j<w.current.oldestTs)){e.next=20;break}return u=!0,e.abrupt("break",23);case 20:v--,e.next=14;break;case 23:return e.next=25,Promise.all(m);case 25:g=e.sent,O(parseFloat(null===(f=g[0])||void 0===f?void 0:f.oldestTs)),k=g.map((function(e){return e.candles})),l=[].concat(Object(r.a)(k.length?k.reduce((function(e,t){return e.concat(t)})):[]),Object(r.a)(l)).sort((function(e,t){return e.time-t.time})),x(l),y.current=!1;case 31:if(S=l.filter((function(e){return e.time>s&&e.time<d})).map((function(e,t,n){return n[t+1]&&e.close!==n[t+1].open&&(e.close=n[t+1].open,e.close>e.high&&(e.high=e.close),e.close<e.low&&(e.low=e.close)),e})),C&&(S=S.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{open:1/e.open,close:1/e.close,high:1/e.low,low:1/e.high})}))),"1D"!==n&&"1W"!==n&&"1M"!==n){e.next=50;break}M={},T=0,e.t0=n,e.next="1D"===e.t0?39:"1W"===e.t0?41:"1M"===e.t0?43:45;break;case 39:return T=X,e.abrupt("break",46);case 41:return T=$,e.abrupt("break",46);case 43:return T=Z,e.abrupt("break",46);case 45:T=X;case 46:S.forEach((function(e){var t=Math.floor(e.time/T);M[t]?(M[t].volume=(e.volume||0)+(M[t].volume||0),M[t].close=e.close,M[t].high<e.high&&(M[t].high=e.high),M[t].low>e.low&&(M[t].low=e.low)):M[t]=Object(V.a)(Object(V.a)({},e),{},{time:t*T})})),i(Object.values(M),{noData:u}),e.next=51;break;case 50:i(S,{noData:u});case 51:e.next=57;break;case 53:e.prev=53,e.t1=e.catch(2),console.log("[getBars]: Get error",e.t1),c(e.t1);case 57:case"end":return e.stop()}}),e,null,[[2,53]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),searchSymbols:function(){},subscribeBars:function(e,t,n,a,i){k.current&&clearInterval(k.current);var c=function(){var e=Object(B.a)(Object(H.a)().mark((function e(){var a,i,c,o,s,d,l;return Object(H.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="1M"===t?Math.floor((new Date).getTime()/Z)*Z:Math.floor((new Date).getTime()/$)*$,e.next=3,_(a,"1M"===t?"month":"week","15m");case 3:if((i=e.sent)&&i.candles){e.next=6;break}return e.abrupt("return");case 6:if(c=i.candles,o={},s=0,"1D"!==t&&"1W"!==t&&"1M"!==t){e.next=25;break}e.t0=t,e.next="1D"===e.t0?13:"1W"===e.t0?15:"1M"===e.t0?17:19;break;case 13:return s=Math.floor((new Date).getTime()/X)*X,e.abrupt("break",20);case 15:return s=Math.floor((new Date).getTime()/$)*$,e.abrupt("break",20);case 17:return s=s=Math.floor((new Date).getTime()/Z)*Z,e.abrupt("break",20);case 19:s=Math.floor((new Date).getTime()/X)*X;case 20:d=c.map((function(e){return e.time})).reduce((function(e,t){return Math.abs(t-s)<Math.abs(e-s)?t:e})),(l=c.filter((function(e){return e.time>=d}))).length>0&&(o.time=s,o.open=l[0].open,o.close=l[l.length-1].close,o.high=Math.max.apply(Math,Object(r.a)(l.map((function(e){return e.high})))),o.low=Math.min.apply(Math,Object(r.a)(l.map((function(e){return e.low})))),o.volume=l.map((function(e){return e.volume})).reduce((function(e,t){return e+t}))),e.next=26;break;case 25:o=c[c.length-1];case 26:if(o){e.next=28;break}return e.abrupt("return");case 28:C&&(o=Object(V.a)(Object(V.a)({},o),{},{open:1/o.open,close:1/o.close,high:1/o.low,low:1/o.high})),n(o);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k.current=setInterval(c,3e4),c()},unsubscribeBars:function(){}}}),[s,_,C,e])}(t,b,u);return Object(c.useEffect)((function(){var e,t,n,r;if(v&&l){k(!0);var a=JSON.parse(localStorage.getItem(be)||"null");!1===(null===a||void 0===a||null===(e=a.charts[0])||void 0===e||null===(t=e.panes[0])||void 0===t||null===(n=t.rightAxisesState[0])||void 0===n||null===(r=n.state)||void 0===r?void 0:r.m_isAutoScale)&&(a.charts[0].panes[0].rightAxisesState[0].state.m_isAutoScale=!0);var i={symbol:"KNC",datafeed:I,interval:"1H",container:v,library_path:"/charting_library/",locale:d?d.slice(0,2):"en",disabled_features:["header_symbol_search","header_fullscreen_button","header_compare","header_saveload","drawing_templates"],enabled_features:["study_templates","create_volume_indicator_by_default","use_localstorage_for_settings","save_chart_properties_to_local_storage"],fullscreen:!1,autosize:!0,studies_overrides:{},theme:o.darkMode?"Dark":"Light",custom_css_url:"/charting_library/style.css",timeframe:"2w",time_frames:[{text:"6m",resolution:"4H",description:"6 Months"},{text:"1m",resolution:"1H",description:"1 Month"},{text:"2w",resolution:"1H",description:"2 Weeks"},{text:"1w",resolution:"1H",description:"1 Week"},{text:"1d",resolution:"15",description:"1 Day"}],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,auto_save_delay:2,saved_data:a},c=new window.TradingView.widget(i);return c.onChartReady((function(){k(!1),c.applyOverrides({"paneProperties.backgroundType":"solid","paneProperties.background":o.darkMode?o.buttonBlack:o.background,"mainSeriesProperties.candleStyle.upColor":o.primary,"mainSeriesProperties.candleStyle.borderUpColor":o.primary,"mainSeriesProperties.candleStyle.wickUpColor":o.primary,"mainSeriesProperties.candleStyle.downColor":o.red,"mainSeriesProperties.candleStyle.borderDownColor":o.red,"mainSeriesProperties.candleStyle.wickDownColor":o.red,"mainSeriesProperties.priceAxisProperties.autoScale":!0,"scalesProperties.textColor":o.text}),c.headerReady().then((function(){var e=c.createButton();e.setAttribute("title","Fullscreen on"),e.addEventListener("click",(function(){T((function(t){var n;return s.isMobile&&(t?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}():(n=v).requestFullscreen?n.requestFullscreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()),e.innerHTML=O.renderToStaticMarkup(t?Object(p.jsx)(P,{}):Object(p.jsx)(S,{})),!t}))})),e.innerHTML=O.renderToStaticMarkup(Object(p.jsx)(P,{}))})),c.subscribe("onAutoSaveNeeded",(function(){c.save((function(e){localStorage.setItem(be,JSON.stringify(e))}))}))})),function(){null!==c&&c.remove()}}}),[o,d,v,b,t,l]),Object(p.jsxs)(de,{fullscreen:M,onClick:function(){return T(!1)},className:i,children:[(y||h)&&Object(p.jsx)(le,{children:Object(p.jsx)(D,{})}),s.isMobile?Object(p.jsx)(ue,{id:"mobile25235",ref:function(e){return j(e)},onClick:function(e){e.stopPropagation()},fullscreen:M,$loading:y||h}):Object(p.jsx)("div",{ref:function(e){return j(e)},style:{height:"100%",width:"100%",display:y||h?"none":"block"},onClick:function(e){e.stopPropagation()}})]})}var pe=o.a.memo(fe),he=n("./src/hooks/useBasicChartData.ts"),me=n("./src/hooks/useMixpanel.ts"),xe=n("./src/state/swap/actions.ts"),ve=n("./src/utils/dmm.ts"),je=n("./node_modules/react-spring/dist/react-spring.esm.js");function ge(){return Object(p.jsx)("div",{children:"."})}var Oe=u.default.div.withConfig({displayName:"AnimatingNumber__TicketView",componentId:"sc-1qfpzb2-0"})(["height:100%;display:flex;flex-direction:row-reverse;overflow:hidden;font-size:","px;position:relative;color:",";letter-spacing:-1px;margin-right:5px;"],(function(e){return e.fontSize}),(function(e){return e.theme.subText})),we=u.default.span.withConfig({displayName:"AnimatingNumber__NumberPlaceHolder",componentId:"sc-1qfpzb2-1"})(["visibility:hidden;"]),ye=u.default.div.withConfig({displayName:"AnimatingNumber__Container",componentId:"sc-1qfpzb2-2"})(["position:relative;height:","px;"],(function(e){return e.fontSize+4})),ke=u.default.div.withConfig({displayName:"AnimatingNumber__TickerDigit",componentId:"sc-1qfpzb2-3"})(["height:10%;text-align:center;"]),Ce=Object(u.default)(je.animated.div).withConfig({displayName:"AnimatingNumber__TickerColumn",componentId:"sc-1qfpzb2-4"})(["position:absolute;height:1000%;bottom:0;transition:all 0.6s cubic-bezier(0.4,-0.1,0.6,1) 1;"]);function _e(e){var t=e.digit,n=e.fontSize,r=Object(c.useState)(0),i=Object(a.a)(r,2),o=i[0],s=i[1],d=Object(c.useRef)();Object(c.useEffect)((function(){return function(e){var t,n;d.current&&s(null!==(t=(null===(n=d.current)||void 0===n?void 0:n.clientHeight)*e)&&void 0!==t?t:0)}(t)}),[t]);var l=Object(je.useSpring)({to:{transform:"translateY(".concat(o,"px)")}});return Object(p.jsxs)(ye,{ref:d,fontSize:n,children:[Object(p.jsx)(Ce,{style:l,children:[9,8,7,6,5,4,3,2,1,0].map((function(e){return Object(p.jsx)(ke,{children:e},e)}))}),Object(p.jsx)(we,{children:"0"})]})}function Se(e){var t=e.value,n=e.symbol,r=e.fontSize,a=t.toString().split("e"),i=parseFloat(a[0]),c=a[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>1e6?Math.max(e,0).toString().split("").reverse():Math.max(e,0).toPrecision(6).split("").reverse()}(i),s=Object(f.a)();return i===1/0?null:Object(p.jsxs)(l.b,{style:{fontWeight:500},children:[Object(p.jsx)(Oe,{fontSize:r,children:o.map((function(e,t){return"."===e?Object(p.jsx)(ge,{},t):Object(p.jsx)(_e,{digit:parseInt(e),fontSize:r},t)}))}),c&&Object(p.jsxs)(l.b,{fontSize:"16px",alignItems:"flex-end",color:s.subText,paddingBottom:"3px",paddingTop:"5px",children:["10",Object(p.jsx)("sup",{style:{fontSize:"10px",alignSelf:"flex-start"},children:c})]}),n&&Object(p.jsx)(l.d,{fontSize:r,color:s.subText,children:n})]})}function Me(){return Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"52",height:"52",viewBox:"0 0 52 52",fill:"none",children:[Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 2V2C39.256 2 50 12.744 50 26V26C50 39.256 39.256 50 26 50V50C12.744 50 2 39.256 2 26V26C2 12.744 12.744 2 26 2Z",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Object(p.jsx)("path",{d:"M25.998 15.5C25.722 15.5 25.498 15.724 25.5 16C25.5 16.276 25.724 16.5 26 16.5C26.276 16.5 26.5 16.276 26.5 16C26.5 15.724 26.276 15.5 25.998 15.5",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),Object(p.jsx)("path",{d:"M27 37V24H24",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}var Te=n("./src/components/LiveChart/LineChart.tsx"),Ie=n("./src/components/LiveChart/WarningIcon.tsx"),ze=u.default.div.withConfig({displayName:"LiveChart__LiveChartWrapper",componentId:"sc-dkl83u-0"})(["width:100%;height:100%;display:flex;flex-direction:column;"]),Pe=u.default.div.withConfig({displayName:"LiveChart__TimeFrameButton",componentId:"sc-dkl83u-1"})(["cursor:pointer;width:26px;height:24px;border-radius:4px;line-height:24px;margin-right:5px;text-align:center;color:",";font-size:12px;font-weight:500;background-color:",";transition:all 0.2s ease;",""],(function(e){return e.theme.subText}),(function(e){return e.theme.buttonBlack}),(function(e){var t=e.theme;return e.active?"background-color: ".concat(t.primary,"; color: ").concat(t.textReverse,";"):"\n    &:hover {\n      background-color: ".concat(t.buttonGray,";\n    }\n  ")})),Ne=u.default.div.withConfig({displayName:"LiveChart__SwitchButtonWrapper",componentId:"sc-dkl83u-2"})(["display:flex;width:24px;height:24px;border-radius:50%;cursor:pointer;align-items:center;justify-content:center;&:hover{background-color:",";}"],(function(e){return e.theme.buttonGray})),Ee=Object(u.default)(pe).withConfig({displayName:"LiveChart__ProLiveChartCustom",componentId:"sc-dkl83u-3"})(["margin:",";display:",";background:",";"],(function(){return s.isMobile?"0":"16px 0 0 0 !important"}),(function(e){return e.$isShowProChart?"block":"none"}),(function(e){var t=e.theme;return t.darkMode?t.buttonBlack:t.background})),Ae=function(e){switch(e){case he.a.HOUR:return"Past hour";case he.a.FOUR_HOURS:return"Past 4 hours";case he.a.DAY:return"Past 24 hours";case he.a.WEEK:return"Past Week";case he.a.MONTH:return"Past Month";case he.a.SIX_MONTHS:return"Past 6 Months"}};function Le(e){var t,n,o,u,h=e.currencies,m=e.onRotateClick,x=Object(K.b)().chainId,j=Object(f.a)(),O=Object(ve.j)(h[xe.a.INPUT]||void 0),w=Object(ve.j)(h[xe.a.OUTPUT]||void 0),y=Object(c.useMemo)((function(){return[O,w].map((function(e){return null===e||void 0===e?void 0:e.wrapped}))}),[O,w]),k=!(null===(t=y[0])||void 0===t||!t.address)&&(null===(n=y[0])||void 0===n?void 0:n.address)===(null===(o=y[1])||void 0===o?void 0:o.address),C=Object(c.useState)(null),_=Object(a.a)(C,2),S=_[0],M=_[1],T=Object(c.useState)(he.a.DAY),I=Object(a.a)(T,2),z=I[0],P=I[1],N=Object(c.useState)({hasProChart:!1,pairAddress:"",apiVersion:"",loading:!0}),E=Object(a.a)(N,2),A=E[0],L=E[1],D=Object(he.b)(y,z),F=D.data,H=D.error,B=D.loading,V=!A.hasProChart&&!A.loading,W=H&&!B,U=V&&W,q=Object(R.j)(),J=Object(R.p)(),G=Object(me.c)().mixpanelHandler;Object(c.useEffect)((function(){null!==S&&M(null)}),[F]),Object(c.useEffect)((function(){var e=!1;if(h.INPUT&&h.OUTPUT)return L({hasProChart:!1,pairAddress:"",apiVersion:"",loading:!0}),se(h,x).then((function(t){e||((t.ver||0===t.ver)&&t.pairAddress?L({hasProChart:!0,pairAddress:t.pairAddress,apiVersion:t.ver,loading:!1}):L({hasProChart:!1,pairAddress:"",apiVersion:"",loading:!1}))})).catch((function(e){console.log(e),L({hasProChart:!1,pairAddress:"",apiVersion:"",loading:!1})})),function(){e=!0}}),[JSON.stringify(h)]);var Y=null!==S&&void 0!==S?S:(null===(u=F[F.length-1])||void 0===u?void 0:u.value)||0,Z=function(e,t){if(e&&e.length>0){var n=e[0].value,r=e[e.length-1].value,a=null!==t?t-r:r-n,i=null!==t?r:n;return{chartColor:r-n>=0?"#31CB9E":"#FF537B",different:a.toPrecision(6),differentPercent:0===i?100:(a/i*100).toFixed(2)}}return{chartColor:"#31CB9E",different:0,differentPercent:0}}(F,S),$=Z.chartColor,X=Z.different,Q=Z.differentPercent,ee=Object(c.useState)(q&&!V),te=Object(a.a)(ee,2),ne=te[0],re=te[1];Object(c.useEffect)((function(){var e;return re(q&&!V),q&&A.loading&&(e=setTimeout((function(){J()}),5e3)),function(){e&&clearTimeout(e)}}),[q,V,A.loading,J]);var ae=function(){return Object(p.jsx)(l.b,{marginTop:"5px",children:Object(r.a)(Object.values(he.a)).map((function(e){return Object(p.jsx)(Pe,{onClick:function(){return P(e)},active:z===e,children:e},e)}))})},ie=Object(c.useMemo)((function(){return Object(p.jsx)(v,{activeName:ne?"pro":"basic",toggle:function(e){U||e!==(ne?"pro":"basic")&&(G("pro"===e?me.a.PRO_CHART_CLICKED:me.a.BASIC_CHART_CLICKED),J())},buttons:[{name:"basic",title:"Basic",disabled:W},{name:"pro",title:"Pro",disabled:V}]})}),[W,V,ne,U,J,G]),ce=Object(c.useMemo)((function(){return[h.INPUT,h.OUTPUT]}),[h.INPUT,h.OUTPUT]);return Object(p.jsx)(ze,{children:k?Object(p.jsxs)(l.b,{minHeight:s.isMobile?"380px":"440px",flexDirection:"column",alignItems:"center",justifyContent:"center",color:j.border,style:{gap:"16px"},children:[Object(p.jsx)(Me,{}),Object(p.jsx)(l.d,{fontSize:16,textAlign:"center",children:Object(p.jsx)(i.b,{id:"You can swap {0} for {1} (and vice versa)<0/>Exchange rate is always 1 to 1.",values:{0:null===O||void 0===O?void 0:O.symbol,1:null===w||void 0===w?void 0:w.symbol},components:{0:Object(p.jsx)("br",{})}})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(l.b,{justifyContent:"space-between",alignItems:"center",paddingY:"4px",children:[Object(p.jsxs)(l.b,{flex:s.isMobile?2:1,children:[Object(p.jsx)(b.a,{currency0:O,currency1:w,size:24,margin:!0}),Object(p.jsxs)(l.b,{alignItems:"center",fontSize:s.isMobile?14:18,color:j.subText,children:[Object(p.jsxs)(l.b,{alignItems:"center",children:[Object(p.jsx)(l.d,{fontSize:s.isMobile?18:24,fontWeight:500,color:j.text,children:null===O||void 0===O?void 0:O.symbol}),Object(p.jsxs)(l.d,{marginLeft:"4px",style:{whiteSpace:"nowrap"},children:[" / ",null===w||void 0===w?void 0:w.symbol]})]}),Object(p.jsx)(Ne,{onClick:m,children:Object(p.jsx)(d.a,{size:14})})]})]}),Object(p.jsx)(l.b,{flex:1,justifyContent:"flex-end",children:ie})]}),Object(p.jsx)(Ee,{currencies:ce,stateProChart:A,$isShowProChart:ne}),!ne&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(l.b,{justifyContent:"space-between",alignItems:"flex-start",marginTop:"12px",children:[Object(p.jsxs)(l.b,{flexDirection:"column",alignItems:"flex-start",children:[0===Y||H?Object(p.jsx)(l.d,{fontSize:28,color:j.subText,children:"--"}):Object(p.jsx)(Se,{value:Y,symbol:null===w||void 0===w?void 0:w.symbol,fontSize:s.isMobile?24:28}),Object(p.jsx)(l.b,{marginTop:"2px",children:0===Y||H?Object(p.jsx)(l.d,{fontSize:12,color:j.disableText,children:"--"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(l.d,{fontSize:12,color:X>=0?"#31CB9E":"#FF537B",marginRight:"5px",children:[X," (",Q,"%)"]}),!S&&Object(p.jsx)(l.d,{fontSize:12,color:j.disableText,children:Ae(z)})]})})]}),!s.isMobile&&ae()]}),s.isMobile&&!q&&ae(),Object(p.jsx)("div",{style:{flex:1,marginTop:"12px"},children:B||W?Object(p.jsx)(l.b,{minHeight:s.isMobile?"300px":"370px",flexDirection:"column",alignItems:"center",justifyContent:"center",color:j.disableText,style:{gap:"16px"},children:B?Object(p.jsx)(g.a,{}):W&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ie.a,{}),Object(p.jsx)(l.d,{fontSize:16,children:Object(p.jsx)(i.b,{id:"Chart is unavailable right now"})})]})}):Object(p.jsx)(Te.a,{data:F,setHoverValue:M,color:$,timeFrame:z,minHeight:370})})]})]})})}t.default=o.a.memo(Le)}}]);